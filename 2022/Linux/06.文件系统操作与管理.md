
# 1 基本操作
## 1.1 查看磁盘和目录的容量
* 使用 `df` 命令查看磁盘的容量
```bash
df
df -h
```

* 使用 `du` 命令查看目录的容量

```bash
# 默认同样以块的大小展示 
du 
# 加上 -h 参数，以更易读的方式展示 
du -h
```
* ` -d` 参数指定查看目录的深度
```bash
du -h -d 0 ~
# 只查看 1 级目录的信息
du -h -d 1 ~
# 查看 2 级
```
```bash
du -h 
# 同 --human-readable 以 K，M，G 为单位，提高信息的可读性。 
du -a 
# 同 --all 显示目录中所有文件的大小。 
du -s 
# 同 --summarize 仅显示总计，只列出最后加总的值。
```
&nbsp;&nbsp;&nbsp;&nbsp;注意：`du` 与 `dh` 的区别

## 1.2 创建虚拟磁盘
**1、dd 命令简介**

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在 Linux 上，**一切即文件**，硬件的设备驱动（如硬盘）和特殊设备文件（如 `/dev/zero` 和 `/dev/random` ）都像普通文件一样，只是在各自的驱动程序中实现了对应的功能，`dd` 也可以读取文件或写入这些文件。这样，`dd` 也可以用在备份硬件的引导扇区、获取一定数量的随机数据或者空数据等任务中。`dd` 程序也可以在复制时处理数据，例如转换字节序、或在 ASCII 与 EBCDIC 编码间互换。

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;命令行选项格式为 **选项=值** ，`dd` 默认从标准输入中读取，并写入到标准输出中，但可以用选项 `if`（input file，输入文件）和 `of`（output file，输出文件）改变。
```bash
# 输出到文件 
dd of=test bs=10 count=1 
# 或者 dd if=/dev/stdin of=test bs=10 count=1 
# 输出到标准输出 
dd if=/dev/stdin of=/dev/stdout bs=10 count=1 
# 在打完了这个命令后，继续在终端打字，作为你的输入

dd if=/dev/stdin of=test bs=10 count=1 conv=ucase
#将输出的英文字符转换为大写再写入文件
```
**2、使用 mkfs 命令格式化磁盘**
```
sudo mkfs.ext4 virtual.img
```

## 1.3 使用mount命令挂载磁盘到目录树
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Linux/UNIX 命令行的 `mount` 指令是告诉操作系统，对应的文件系统已经准备好，可以使用了，而该文件系统会对应到一个特定的点（称为挂载点）。挂载好的文件、目录、设备以及特殊文件即可提供用户使用。
```
mount [-o [操作选项]] [-t 文件系统类型] [-w|--rw|--ro] [文件系统源] [挂载点]
```
**1、使用umount 命令卸载已挂载磁盘**
```bash
# 命令格式 sudo umount 已挂载设备名或者挂载点，如： 
sudo umount /mnt
```
**2、使用 fdisk 为磁盘分区**
```bash
# 查看硬盘分区表信息 
sudo fdisk -l

# 进入磁盘分区模式 
sudo fdisk virtual.img
```
**3、使用 losetup 命令建立镜像与回环设备的关联**
```bash
sudo losetup /dev/loop0 virtual.img 
# 如果提示设备忙你也可以使用其它的回环设备，"ls /dev/loop*"参看所有回环设备 # 解除设备关联 sudo losetup -d /dev/loop0
```
